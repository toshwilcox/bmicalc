WindowManager:
    MainScreen:

# pointer widget
<Pointer>
    size_hint : None, None
    size : 42, 15
    canvas:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size

#BMICalculator:
#: set a .3
#: set b .15
#: set c .1

<MainScreen>

    BoxLayout:
        orientation: "vertical"
        #size_hint: 1, 1

        BoxLayout:
            orientation: "horizontal"
            size_hint: 1, .15
            padding: [20, 0, 20, 0]
            spacing: 50

            #pos_hint: {"top": 1, "x":1}
            canvas.before:
                Color:
                    rgb: 43/255, 43/255, 43/255, 1
                Rectangle:
                    size: self.size
                    pos: self.pos


            ToggleButton:
                text: "Imperial"
                group: "units button"
                state: "down"
                size_hint: .15, .3
                pos_hint: {"top": .65}
                allow_no_selection: False
                on_press: root.imperial_button()
                background_normal: 'unpressed_button.png'
                background_down: 'pressed_button.png'
                font_size: (20)
                font_name: 'SF-UI-Text-Regular.otf'
                id: imperial_button

            ToggleButton:
                text: "Metric"
                group: "units button"
                size_hint: .15, .3
                pos_hint: {"top": .65}
                allow_no_selection: False
                on_press: root.metric_button()
                background_normal: 'unpressed_button.png'
                background_down: 'pressed_button.png'
                #background_down: ''
                font_size: (20)
                font_name: 'SF-UI-Text-Regular.otf'

            #ToggleButton:
            #    text: "adult"
            #    group: "age"
            #    state: "down"
            #    size_hint: .5, .5
            #    allow_no_selection: False
            #    on_press: root.imperial_button()

            #ToggleButton:
            #    text: "child"
            #    group: "age"
            #    size_hint: .5, .5
            #    allow_no_selection: False
            #    on_press: root.metric_button()




        BoxLayout:
            size_hint: 1, .1

            padding: [5,5,5,5]
            canvas.before:
                Color:
                    rgb: 43/255, 43/255, 43/255, 1
                Rectangle:
                    size: self.size
                    pos: self.pos


            Label:
                text: "Height"
                font_size: (21)
                font_name: 'SF-UI-Text-Regular.otf'
                color: 1, 1, 1, 1
                pos_hint: {'x':0}

            ToggleButton:
                #max_text_length: 4
                #input_filter: "float"
                #input_type: "number"
                disabled: root.height_1_bool
                id: height_1
                allow_no_selection: False
                state: "down"
                #on_text: root.calculate_bmi()
                #on_touch_down: print('touch down') #root.clear_height_text_1()
                #on_text: print('test')
                #on_focus: print('focused')
                on_touch_down: if self.collide_point(*args[1].pos): self.text = ""
                #multiline: False
                #on_focus: root.text_focused()
                text: 'test'
                group: "text_button"
                text: ""
                on_press: root.height_1_button()
                background_normal: 'unpressed_label.png'
                background_down: 'pressed_label.png'
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'
                color: 0, 0, 0, 1
                size_hint: 1, .65
                pos_hint: {"center_y": .5}






            Label:
                text: root.height_units_1
                font_size: (22)
                font_name: 'SF-UI-Text-Regular.otf'
                color: 1, 1, 1, 1
                pos_hint: {'center_x': 1}

            ToggleButton:
                #max_text_length: 4
                #input_filter: "int"
                id: height_2
                #on_text: root.calculate_bmi()
                on_touch_down: if self.collide_point(*args[1].pos): self.text = ""
                group: "text_button"
                allow_no_selection: False
                text: ""
                on_press: root.height_2_button()
                background_normal: 'unpressed_label.png'
                background_down: 'pressed_label.png'
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'
                color: 0, 0, 0, 1
                size_hint: 1, .65
                pos_hint: {"center_y": .5}





            Label:
                text: root.height_units_2
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'
                color: 1, 1, 1, 1

        BoxLayout:
            size_hint: 1, .1
        #    pos_hint: {"top": .8, "x":1}
            canvas.before:
                Color:
                    rgb: 43/255, 43/255, 43/255, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

            Label:
                text: "Weight"
                font_size: (22)
                font_name: 'SF-UI-Text-Regular.otf'
                color: 1, 1, 1, 1

            ToggleButton:
                #max_text_length: 4
                #input_filter: "int"
                id: weight
                #on_text: root.calculate_bmi()
                on_touch_down: if self.collide_point(*args[1].pos): self.text = ""
                group: "text_button"
                allow_no_selection: False
                text: ""
                on_press: root.weight_button()
                background_normal: 'unpressed_label.png'
                background_down: 'pressed_label.png'
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'
                color: 0, 0, 0, 1
                size_hint: 1, .65
                pos_hint: {"center_y": .5}



            Label:
                text: root.weight_units
                font_size: (22)
                font_name: 'SF-UI-Text-Regular.otf'
                color: 1, 1, 1, 1

        BoxLayout:
            size_hint: 1, .1
        #    pos_hint: {"top": .8, "x":1}
            canvas.before:
                Color:
                    rgb: 43/255, 43/255, 43/255, 1
                Rectangle:
                    size: self.size # self.width * .8, self.height * .5
                    pos: self.pos # self.width*.1, root.height*(a+b) + self.height*.25
                    # I need to add the heights of the other two box layouts underneath
                    # so in this case I have .45 because of .3 + .15

                Color:
                    rgb: 1, 1, 1, 1
                Rectangle:
                    size: self.width * .8, self.height * .5
                    pos: self.width*.1, self.height*.25 +  root.height*(a+b+c)



                # I will have values of bmi from 14 to 44

                # 14 - 18.5 is underweight blue.
                Color:
                    rgb: 147/255, 207/255, 224/255, 1
                Rectangle:
                    size: (self.width * .8) * (4.5 / 30), self.height * .5
                    pos: self.width*.1, self.height*.25 + root.height*(a+b+c)

                # 18.5 - 25 is healthy green.
                Color:
                    rgb: 131/255, 186/255, 61/255, 1 # 116/255, 178/255, 36/255, 1
                Rectangle:
                    size: (self.width * .8) * (6.5 / 30), self.height * .5
                    pos: self.width*.1 + (self.width * .8) * (4.5 / 30), self.height*.25 + + root.height*(a+b+c)


                # 25 - 30 is overweight yellow.
                Color:
                    rgb: 231/255, 223/255, 84/255, 1
                Rectangle:
                    size: (self.width * .8) * (5 / 30), self.height * .5
                    pos: self.width*.1 + (self.width * .8) * (11 / 30), self.height*.25 + + root.height*(a+b+c)


                # 30-35 is obese orange. class 1
                Color:
                    rgb: 243/255, 179/255, 63/255, 1
                Rectangle:
                    size: (self.width * .8) * (5 / 30), self.height * .5
                    pos: self.width*.1 + (self.width * .8) * (16 / 30), self.height*.25 + + root.height*(a+b+c)


                # 35-40 is obese class 2 dark orange.
                Color:
                    rgb: 243/255, 136/255, 64/255, 1
                Rectangle:
                    size: (self.width * .8) * (5 / 30), self.height * .5
                    pos: self.width*.1 + (self.width * .8) * (21 / 30), self.height*.25 + + root.height*(a+b+c)


                # 40 - 44 is obese class 3 dark red.
                Color:
                    rgb: 243/255, 93/255, 64/255, 1
                Rectangle:
                    size: (self.width * .8) * (4 / 30), self.height * .5
                    pos: self.width*.1 + (self.width * .8) * (26 / 30), self.height*.25 + + root.height*(a+b+c)

                # the pointer
                # the pointer has to be last to make sure that it is not covered
                Color:
                    rgb: 0, 0, 0, 1
                Rectangle:
                    size: (self.width * .005), self.height * .6
                    pos: self.width*.1 + root.pointer_x - (self.width * .005)/2, self.height*.25 +  root.height*(a+b+c)

                #Color:
                #    rgb: 0, 0, 0, 1
                #Rectangle:
                #    size: (self.width * .005), self.height * .6
                #    pos: self.width*.1 + root.pointer_x + 2 - (self.width * .005)/2, self.height*.25 +  root.height*(a+b+c)


        BoxLayout:
            orientation: "vertical"
            size_hint: 1, c
            BoxLayout:
                padding: [5, 5, 5, 5]
                canvas.before:
                    Color:
                        rgb: 43/255, 43/255, 43/255, 1
                    Rectangle:
                        size: self.size
                        pos: self.pos
                Label:
                    text: "BMI : " + root.display_bmi_final
                    font_size: root.display_font_size
                    font_name: 'SF-UI-Text-Regular.otf'
                    color: 1, 1, 1, 1
                Label:
                    text: root.display_bmi_category
                    font_size: root.display_font_size
                    font_name: 'SF-UI-Text-Regular.otf'
                    color: 1, 1, 1, 1
            BoxLayout:
                padding: [self.width*.25,0,self.width*.25,0]
                canvas.before:
                    Color:
                        rgb: 43/255, 43/255, 43/255, 1
                    Rectangle:
                        size: self.size
                        pos: self.pos
                Button:
                    text: "Show Ranges"
                    on_press: root.show_ranges()
                    background_color: 107/255, 107/255, 107/255, 1
                    background_normal: ''
                    background_down: ''
                    on_press: self.background_color = (70/255, 70/255, 70/255, 1)
                    on_release: self.background_color = (107/255, 107/255, 107/255, 1)
                    font_size: (15)
                    font_name: 'SF-UI-Text-Regular.otf'
                    #size_hint: 1, 1

        GridLayout:
            size_hint: 1, a
            # for the calculator part
            cols: 3
            rows: 4
            padding: [5,5,5,5]
            spacing: [2.5, 2.5]

            canvas.before:
                Color:
                    rgb: 43/255, 43/255, 43/255, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

            Button:
                text: "1"
                on_press: root.calculate_bmi()
                on_press: root.add(1)
                background_color: 107/255, 107/255, 107/255, 1
                background_normal: ''
                background_down: ''
                on_press: self.background_color = (70/255, 70/255, 70/255, 1)
                on_release: self.background_color = (107/255, 107/255, 107/255, 1)
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'

            Button:
                text: "2"
                on_press: root.calculate_bmi()
                on_press: root.add(2)
                background_color: 107/255, 107/255, 107/255, 1
                background_normal: ''
                background_down: ''
                on_press: self.background_color = (70/255, 70/255, 70/255, 1)
                on_release: self.background_color = (107/255, 107/255, 107/255, 1)
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'

            Button:
                text: "3"
                on_press: root.calculate_bmi()
                on_press: root.add(3)
                background_color: 107/255, 107/255, 107/255, 1
                background_normal: ''
                background_down: ''
                on_press: self.background_color = (70/255, 70/255, 70/255, 1)
                on_release: self.background_color = (107/255, 107/255, 107/255, 1)
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'

            Button:
                text: "4"
                on_press: root.calculate_bmi()
                on_press: root.add(4)
                background_color: 107/255, 107/255, 107/255, 1
                background_normal: ''
                background_down: ''
                on_press: self.background_color = (70/255, 70/255, 70/255, 1)
                on_release: self.background_color = (107/255, 107/255, 107/255, 1)
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'

            Button:
                text: "5"
                on_press: root.calculate_bmi()
                on_press: root.add(5)
                background_color: 107/255, 107/255, 107/255, 1
                background_normal: ''
                background_down: ''
                on_press: self.background_color = (70/255, 70/255, 70/255, 1)
                on_release: self.background_color = (107/255, 107/255, 107/255, 1)
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'

            Button:
                text: "6"
                on_press: root.calculate_bmi()
                on_press: root.add(6)
                background_color: 107/255, 107/255, 107/255, 1
                background_normal: ''
                background_down: ''
                on_press: self.background_color = (70/255, 70/255, 70/255, 1)
                on_release: self.background_color = (107/255, 107/255, 107/255, 1)
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'

            Button:
                text: "7"
                on_press: root.calculate_bmi()
                on_press: root.add(7)
                background_color: 107/255, 107/255, 107/255, 1
                background_normal: ''
                background_down: ''
                on_press: self.background_color = (70/255, 70/255, 70/255, 1)
                on_release: self.background_color = (107/255, 107/255, 107/255, 1)
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'

            Button:
                text: "8"
                on_press: root.calculate_bmi()
                on_press: root.add(8)
                background_color: 107/255, 107/255, 107/255, 1
                background_normal: ''
                background_down: ''
                on_press: self.background_color = (70/255, 70/255, 70/255, 1)
                on_release: self.background_color = (107/255, 107/255, 107/255, 1)
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'

            Button:
                text: "9"
                on_press: root.calculate_bmi()
                on_press: root.add(9)
                background_color: 107/255, 107/255, 107/255, 1
                background_normal: ''
                background_down: ''
                on_press: self.background_color = (70/255, 70/255, 70/255, 1)
                on_release: self.background_color = (107/255, 107/255, 107/255, 1)
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'

            Button:
                text: "."
                on_press: root.calculate_bmi()
                on_press: root.add(".")
                background_color: 70/255, 70/255, 70/255, 1
                background_normal: ''
                background_down: ''
                on_press: self.background_color = (34/255, 34/255, 34/255, 1)
                on_release: self.background_color = (70/255, 70/255, 70/255, 1)
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'

            Button:
                text: "0"
                on_press: root.calculate_bmi()
                on_press: root.add(0)
                background_color: 107/255, 107/255, 107/255, 1
                background_normal: ''
                background_down: ''
                on_press: self.background_color = (70/255, 70/255, 70/255, 1)
                on_release: self.background_color = (107/255, 107/255, 107/255, 1)
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'

            Button:
                text: 'delete'
                on_press: root.calculate_bmi()
                on_press: root.delete_text()
                background_color: 70/255, 70/255, 70/255, 1
                background_normal: ''
                background_down: ''
                on_press: self.background_color = (34/255, 34/255, 34/255, 1)
                on_release: self.background_color = (70/255, 70/255, 70/255, 1)
                font_size: (23.5)
                font_name: 'SF-UI-Text-Regular.otf'




        BoxLayout:
            # for a banner ad at the bottom
            size_hint: 1, b
        #    pos_hint: {"top": .8, "x":1}
            canvas.before:
                Color:
                    rgb: 43/255, 43/255, 43/255, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
